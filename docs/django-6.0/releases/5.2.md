# Django 5.2 release notes

*April 2, 2025*

Welcome to Django 5.2!

These release notes cover the [new features](#whats-new-5-2), as well as
some [backwards incompatible changes](#backwards-incompatible-5-2) you
should be aware of when upgrading from Django 5.1 or earlier. We’ve
[begun the deprecation process for some features](#deprecated-features-5-2).

See the [How to upgrade Django to a newer version](../howto/upgrade-version.md) guide if you’re updating an existing
project.

Django 5.2 is designated as a [long-term support release](../internals/release-process.md#term-Long-term-support-release). It will receive security updates for at least
three years after its release. Support for the previous LTS, Django 4.2, will
end in April 2026.

## Python compatibility

Django 5.2 supports Python 3.10, 3.11, 3.12, 3.13, and 3.14 (as of 5.2.8). We
**highly recommend** and only officially support the latest release of each
series.

<a id="whats-new-5-2"></a>

## What’s new in Django 5.2

### Automatic models import in the `shell`

The [`shell`](../ref/django-admin.md#django-admin-shell) management command now automatically imports models from
all installed apps. You can view further details of the imported objects by
setting the `--verbosity` flag to 2 or more:

```console
$ python -Wall manage.py shell --verbosity=2
6 objects imported automatically, including:

  from django.contrib.admin.models import LogEntry
  from django.contrib.auth.models import Group, Permission, User
  from django.contrib.contenttypes.models import ContentType
  from django.contrib.sessions.models import Session
```

This [behavior can be customized](../howto/custom-shell.md#customizing-shell-auto-imports) to add
or remove automatic imports.

### Composite Primary Keys

The new [`django.db.models.CompositePrimaryKey`](../ref/models/fields.md#django.db.models.CompositePrimaryKey) allows tables to be
created with a primary key consisting of multiple fields.

To use a composite primary key, when defining a model set the `pk` attribute
to be a `CompositePrimaryKey`:

```default
from django.db import models


class Release(models.Model):
    pk = models.CompositePrimaryKey("version", "name")
    version = models.IntegerField()
    name = models.CharField(max_length=20)
```

See [Composite primary keys](../topics/composite-primary-key.md) for more details.

### Simplified override of [`BoundField`](../ref/forms/api.md#django.forms.BoundField)

Prior to version 5.2, overriding [`Field.get_bound_field()`](../ref/forms/fields.md#django.forms.Field.get_bound_field) was the only
option to use a custom [`BoundField`](../ref/forms/api.md#django.forms.BoundField). Django now supports
specifying the following attributes to customize form rendering:

* [`BaseRenderer.bound_field_class`](../ref/forms/renderers.md#django.forms.renderers.BaseRenderer.bound_field_class) at the project level,
* [`Form.bound_field_class`](../ref/forms/api.md#django.forms.Form.bound_field_class) at the form level, and
* [`Field.bound_field_class`](../ref/forms/fields.md#django.forms.Field.bound_field_class) at the field level.

For example, to customize the `BoundField` of a `Form` class:

```default
from django import forms


class CustomBoundField(forms.BoundField):

    custom_class = "custom"

    def css_classes(self, extra_classes=None):
        result = super().css_classes(extra_classes)
        if self.custom_class not in result:
            result += f" {self.custom_class}"
        return result.strip()


class CustomForm(forms.Form):
    bound_field_class = CustomBoundField

    name = forms.CharField(
        label="Your Name",
        max_length=100,
        required=False,
        widget=forms.TextInput(attrs={"class": "name-input-class"}),
    )
    email = forms.EmailField(label="Your Email")
```

When rendering a `CustomForm` instance, the following HTML is included:

```html
<div class="custom">
  <label for="id_name">Your Name:</label>
  <input type="text" name="name" class="name-input-class" maxlength="100" id="id_name">
</div>

<div class="custom">
  <label for="id_email">Your Email:</label>
  <input type="email" name="email" maxlength="320" required="" id="id_email">
</div>
```

See [Customizing BoundField](../ref/forms/api.md#custom-boundfield) for more details about this feature.

### Minor features

#### [`django.contrib.admin`](../ref/contrib/admin/index.md#module-django.contrib.admin)

* The `admin/base.html` template now has a new block
  [extrabody](../ref/contrib/admin/index.md#extrabody) for adding custom code before the closing
  `</body>` tag.
* The value of a [`URLField`](../ref/models/fields.md#django.db.models.URLField) now renders as a link.

#### [`django.contrib.admindocs`](../ref/contrib/admin/admindocs.md#module-django.contrib.admindocs)

* Links to components in docstrings now supports custom link text, using the
  format `:role:`link text <link>``. See [documentation helpers](../ref/contrib/admin/admindocs.md#admindocs-helpers) for more details.
* The [model pages](../ref/contrib/admin/admindocs.md#admindocs-model-reference) are now restricted to
  users with the corresponding view or change permissions.

#### [`django.contrib.auth`](../topics/auth/index.md#module-django.contrib.auth)

* The default iteration count for the PBKDF2 password hasher is increased from
  870,000 to 1,000,000.
* The following new asynchronous methods are now provided, using an `a`
  prefix:
  * [`UserManager.acreate_user()`](../ref/contrib/auth.md#django.contrib.auth.models.UserManager.acreate_user)
  * [`UserManager.acreate_superuser()`](../ref/contrib/auth.md#django.contrib.auth.models.UserManager.acreate_superuser)
  * [`BaseUserManager.aget_by_natural_key()`](../topics/auth/customizing.md#django.contrib.auth.models.BaseUserManager.aget_by_natural_key)
  * [`User.aget_user_permissions()`](../ref/contrib/auth.md#django.contrib.auth.models.User.aget_user_permissions)
  * [`User.aget_all_permissions()`](../ref/contrib/auth.md#django.contrib.auth.models.User.aget_all_permissions)
  * [`User.aget_group_permissions()`](../ref/contrib/auth.md#django.contrib.auth.models.User.aget_group_permissions)
  * [`User.ahas_perm()`](../ref/contrib/auth.md#django.contrib.auth.models.User.ahas_perm)
  * [`User.ahas_perms()`](../ref/contrib/auth.md#django.contrib.auth.models.User.ahas_perms)
  * [`User.ahas_module_perms()`](../ref/contrib/auth.md#django.contrib.auth.models.User.ahas_module_perms)
  * [`ModelBackend.aauthenticate()`](../ref/contrib/auth.md#django.contrib.auth.backends.ModelBackend.aauthenticate)
  * [`ModelBackend.aget_user_permissions()`](../ref/contrib/auth.md#django.contrib.auth.backends.ModelBackend.aget_user_permissions)
  * [`ModelBackend.aget_group_permissions()`](../ref/contrib/auth.md#django.contrib.auth.backends.ModelBackend.aget_group_permissions)
  * [`ModelBackend.aget_all_permissions()`](../ref/contrib/auth.md#django.contrib.auth.backends.ModelBackend.aget_all_permissions)
  * [`ModelBackend.ahas_perm()`](../ref/contrib/auth.md#django.contrib.auth.backends.ModelBackend.ahas_perm)
  * [`ModelBackend.ahas_module_perms()`](../ref/contrib/auth.md#django.contrib.auth.backends.ModelBackend.ahas_module_perms)
  * [`RemoteUserBackend.aauthenticate()`](../ref/contrib/auth.md#django.contrib.auth.backends.RemoteUserBackend.aauthenticate)
  * [`RemoteUserBackend.aconfigure_user()`](../ref/contrib/auth.md#django.contrib.auth.backends.RemoteUserBackend.aconfigure_user)
* Auth backends can now provide async implementations which are used when
  calling async auth functions (e.g.
  [`aauthenticate()`](../topics/auth/default.md#django.contrib.auth.aauthenticate)) to reduce context-switching
  which improves performance. See [adding an async interface](../topics/auth/customizing.md#writing-authentication-backends-async-interface) for more details.
* The [password validator classes](../topics/auth/passwords.md#included-password-validators)
  now have a new method `get_error_message()`, which can be overridden in
  subclasses to customize the error messages.

#### [`django.contrib.gis`](../ref/contrib/gis/index.md#module-django.contrib.gis)

* GDAL now supports curved geometries `CurvePolygon`, `CompoundCurve`,
  `CircularString`, `MultiSurface`, and `MultiCurve` via the new
  [`OGRGeometry.has_curve`](../ref/contrib/gis/gdal.md#django.contrib.gis.gdal.OGRGeometry.has_curve) property, and the
  [`OGRGeometry.get_linear_geometry()`](../ref/contrib/gis/gdal.md#django.contrib.gis.gdal.OGRGeometry.get_linear_geometry) and
  [`OGRGeometry.get_curve_geometry()`](../ref/contrib/gis/gdal.md#django.contrib.gis.gdal.OGRGeometry.get_curve_geometry) methods.
* [`coveredby`](../ref/contrib/gis/geoquerysets.md#std-fieldlookup-coveredby) and [`covers`](../ref/contrib/gis/geoquerysets.md#std-fieldlookup-covers) lookup are now supported on MySQL.

#### [`django.contrib.syndication`](../ref/contrib/syndication.md#module-django.contrib.syndication)

* All [`SyndicationFeed`](../ref/utils.md#django.utils.feedgenerator.SyndicationFeed) classes now support
  a `stylesheets` attribute. If specified, an `<? xml-stylesheet ?>`
  processing instruction will be added to the top of the document for each
  stylesheet in the given list. See [Feed stylesheets](../ref/contrib/syndication.md#feed-stylesheets) for more details.

#### Database backends

* MySQL connections now default to using the `utf8mb4` character set,
  instead of `utf8`, which is an alias for the deprecated character set
  `utf8mb3`.
* Oracle backends now support [connection pools](../ref/databases.md#oracle-pool), by setting
  `"pool"` in the [`OPTIONS`](../ref/settings.md#std-setting-OPTIONS) part of your database configuration.

#### Decorators

* [`method_decorator()`](../ref/utils.md#django.utils.decorators.method_decorator) now supports wrapping
  asynchronous view methods.

#### Email

* Tuple items of [`EmailMessage.attachments`](../topics/email.md#django.core.mail.EmailMessage) and
  [`EmailMultiAlternatives.attachments`](../topics/email.md#django.core.mail.EmailMultiAlternatives) are now named tuples, as opposed
  to regular tuples.
* [`EmailMultiAlternatives.alternatives`](../topics/email.md#django.core.mail.EmailMultiAlternatives.alternatives) is now a list of
  named tuples, as opposed to regular tuples.
* The new [`body_contains()`](../topics/email.md#django.core.mail.EmailMultiAlternatives.body_contains) method
  returns a boolean indicating whether a provided text is contained in the
  email `body` and in all attached MIME type `text/*` alternatives.

#### Error Reporting

* The attribute [`SafeExceptionReporterFilter.hidden_settings`](../howto/error-reporting.md#django.views.debug.SafeExceptionReporterFilter.hidden_settings) now
  treats values as sensitive if their name includes `AUTH`.

#### Forms

* The new [`ColorInput`](../ref/forms/widgets.md#django.forms.ColorInput) form widget is for entering a color
  in `rrggbb` hexadecimal format and renders as `<input type="color" ...>`.
  Some browsers support a visual color picker interface for this input type.
* The new [`SearchInput`](../ref/forms/widgets.md#django.forms.SearchInput) form widget is for entering search
  queries and renders as `<input type="search" ...>`.
* The new [`TelInput`](../ref/forms/widgets.md#django.forms.TelInput) form widget is for entering telephone
  numbers and renders as `<input type="tel" ...>`.
* The new `field_id` argument for [`ErrorList`](../ref/forms/api.md#django.forms.ErrorList) allows an
  HTML `id` attribute to be added in the error template. See
  [`ErrorList.field_id`](../ref/forms/api.md#django.forms.ErrorList.field_id) for details.
* An [`aria_describedby`](../ref/forms/api.md#django.forms.BoundField.aria_describedby) property is added to
  `BoundField` to ease use of this HTML attribute in templates.
* To improve accessibility for screen reader users `aria-describedby` is used
  to associate form fields with their error messages. See
  [how form errors are displayed](../ref/forms/api.md#form-error-display) for details.
* The new asset object [`Script`](../topics/forms/media.md#django.forms.Script) is available for adding
  custom HTML-attributes to JavaScript in form media. See
  [paths as objects](../topics/forms/media.md#form-media-asset-objects) for more details.

#### Management Commands

* A new warning is displayed when running [`runserver`](../ref/django-admin.md#django-admin-runserver), indicating that
  it is unsuitable for production. This warning can be suppressed by setting
  the [`DJANGO_RUNSERVER_HIDE_WARNING`](../ref/django-admin.md#envvar-DJANGO_RUNSERVER_HIDE_WARNING) environment variable to
  `"true"`.
* The [`makemigrations`](../ref/django-admin.md#django-admin-makemigrations) and [`migrate`](../ref/django-admin.md#django-admin-migrate) commands  have a new
  `Command.autodetector` attribute for subclasses to override in order to use
  a custom autodetector class.
* The new [`BaseCommand.get_check_kwargs()`](../howto/custom-management-commands.md#django.core.management.BaseCommand.get_check_kwargs) method can be overridden in
  custom commands to control the running of system checks, e.g. to opt into
  database-dependent checks.

#### Migrations

* The new operation [`AlterConstraint`](../ref/migration-operations.md#django.db.migrations.operations.AlterConstraint) is a no-op operation that alters
  constraints without dropping and recreating constraints in the database.

#### Models

* The `SELECT` clause generated when using [`QuerySet.values()`](../ref/models/querysets.md#django.db.models.query.QuerySet.values) and
  [`QuerySet.values_list()`](../ref/models/querysets.md#django.db.models.query.QuerySet.values_list) now matches the specified order of the
  referenced expressions. Previously, the order was based on a set of
  counterintuitive rules which made query combination through methods such as
  [`QuerySet.union()`](../ref/models/querysets.md#django.db.models.query.QuerySet.union) unpredictable.
* Added support for validation of model constraints which use a
  [`GeneratedField`](../ref/models/fields.md#django.db.models.GeneratedField).
* The new [`Expression.set_returning`](../ref/models/expressions.md#django.db.models.Expression.set_returning) attribute specifies that the
  expression contains a set-returning function, enforcing subquery evaluation.
  This is necessary for many Postgres set-returning functions.
* [`CharField.max_length`](../ref/models/fields.md#django.db.models.CharField.max_length) is no
  longer required to be set on SQLite, which supports unlimited `VARCHAR`
  columns.
* [`QuerySet.explain()`](../ref/models/querysets.md#django.db.models.query.QuerySet.explain) now supports the `memory` and `serialize`
  options on PostgreSQL 17+.
* The new [`JSONArray`](../ref/models/database-functions.md#django.db.models.functions.JSONArray) database function
  accepts a list of field names or expressions and returns a JSON array
  containing those values.
* The new [`Expression.allows_composite_expressions`](../ref/models/expressions.md#django.db.models.Expression.allows_composite_expressions) attribute specifies
  that the expression allows composite expressions, for example, to support
  [composite primary keys](../topics/composite-primary-key.md#cpk-and-database-functions).

#### Requests and Responses

* The new [`HttpResponse.text`](../ref/request-response.md#django.http.HttpResponse.text) property provides the string
  representation of [`HttpResponse.content`](../ref/request-response.md#django.http.HttpResponse.content).
* The new [`HttpRequest.get_preferred_type()`](../ref/request-response.md#django.http.HttpRequest.get_preferred_type) method can be used to query
  the preferred media type the client accepts.
* The new `preserve_request` argument for
  [`HttpResponseRedirect`](../ref/request-response.md#django.http.HttpResponseRedirect) and
  [`HttpResponsePermanentRedirect`](../ref/request-response.md#django.http.HttpResponsePermanentRedirect)
  determines whether the HTTP status codes 302/307 or 301/308 are used,
  respectively.
* The new `preserve_request` argument for
  [`redirect()`](../topics/http/shortcuts.md#django.shortcuts.redirect) allows to instruct the user agent to reuse
  the HTTP method and body during redirection using specific status codes.

#### Serialization

* Each serialization format now defines a `Deserializer` class, rather than a
  function, to improve extensibility when defining a
  [custom serialization format](../topics/serialization.md#custom-serialization-formats).

#### Templates

* The new [`simple_block_tag()`](../howto/custom-template-tags.md#django.template.Library.simple_block_tag) decorator enables
  the creation of simple block tags, which can accept and use a section of the
  template.

#### Tests

* Stack frames from Django’s custom assertions are now hidden. This makes test
  failures easier to read and enables [`test --pdb`](../ref/django-admin.md#cmdoption-test-pdb) to directly enter
  into the failing test method.
* Data loaded from [`fixtures`](../topics/testing/tools.md#django.test.TransactionTestCase.fixtures) and from
  migrations enabled with [serialized_rollback=True](../topics/testing/overview.md#test-case-serialized-rollback) are now available during
  `TransactionTestCase.setUpClass()`.

#### URLs

* [`reverse()`](../ref/urlresolvers.md#django.urls.reverse) and [`reverse_lazy()`](../ref/urlresolvers.md#django.urls.reverse_lazy) now accept
  `query` and `fragment` keyword arguments, allowing the addition of a
  query string and/or fragment identifier in the generated URL, respectively.

#### Utilities

* [`SafeString`](../ref/utils.md#django.utils.safestring.SafeString) now returns
  [`NotImplemented`](https://docs.python.org/3/library/constants.html#NotImplemented) in `__add__` for non-string right-hand side
  values. This aligns with the [`str`](https://docs.python.org/3/library/stdtypes.html#str) addition behavior and allows
  `__radd__` to be used if available.
* [`format_html_join()`](../ref/utils.md#django.utils.html.format_html_join) now supports taking an iterable
  of mappings, passing their contents as keyword arguments to
  [`format_html()`](../ref/utils.md#django.utils.html.format_html).

<a id="backwards-incompatible-5-2"></a>

## Backwards incompatible changes in 5.2

### Database backend API

This section describes changes that may be needed in third-party database
backends.

* The new [`Model._is_pk_set()`](../ref/models/instances.md#django.db.models.Model._is_pk_set) method
  allows checking if a Model instance’s primary key is defined.
* `BaseDatabaseOperations.adapt_decimalfield_value()` is now a no-op, simply
  returning the given value.

### [`django.contrib.gis`](../ref/contrib/gis/index.md#module-django.contrib.gis)

* Support for PostGIS 3.0 is removed.
* Support for GDAL 3.0 is removed.

### Dropped support for PostgreSQL 13

Upstream support for PostgreSQL 13 ends in November 2025. Django 5.2 supports
PostgreSQL 14 and higher.

### Changed MySQL connection character set default

MySQL connections now default to using the `utf8mb4` character set, instead
of `utf8`, which is an alias for the deprecated character set `utf8mb3`.
`utf8mb3` can be specified in the `OPTIONS` part of the `DATABASES`
setting, if needed for legacy databases.

### Miscellaneous

* Adding [`EmailMultiAlternatives.alternatives`](../topics/email.md#django.core.mail.EmailMultiAlternatives.alternatives) is now only supported via
  the [`attach_alternative()`](../topics/email.md#django.core.mail.EmailMultiAlternatives.attach_alternative) method.
* The minimum supported version of `gettext` is increased from 0.15 to 0.19.
* `HttpRequest.accepted_types` is now sorted by the client’s preference,
  based on the request’s `Accept` header.
* The attributes [`UniqueConstraint.violation_error_code`](../ref/models/constraints.md#django.db.models.UniqueConstraint.violation_error_code) and
  [`UniqueConstraint.violation_error_message`](../ref/models/constraints.md#django.db.models.UniqueConstraint.violation_error_message) are now always used when
  provided. Previously, they were ignored if [`UniqueConstraint.fields`](../ref/models/constraints.md#django.db.models.UniqueConstraint.fields)
  was set without a [`UniqueConstraint.condition`](../ref/models/constraints.md#django.db.models.UniqueConstraint.condition).
* The [`debug()`](../ref/templates/api.md#django.template.context_processors.debug) context processor is no
  longer included in the default project template.
* The following methods now have `alters_data=True` set to prevent side
  effects when [rendering a template context](../ref/templates/api.md#alters-data-description):
  * [`UserManager.create_user()`](../ref/contrib/auth.md#django.contrib.auth.models.UserManager.create_user)
  * [`UserManager.acreate_user()`](../ref/contrib/auth.md#django.contrib.auth.models.UserManager.acreate_user)
  * [`UserManager.create_superuser()`](../ref/contrib/auth.md#django.contrib.auth.models.UserManager.create_superuser)
  * [`UserManager.acreate_superuser()`](../ref/contrib/auth.md#django.contrib.auth.models.UserManager.acreate_superuser)
  * [`QuerySet.create()`](../ref/models/querysets.md#django.db.models.query.QuerySet.create)
  * [`QuerySet.acreate()`](../ref/models/querysets.md#django.db.models.query.QuerySet.acreate)
  * [`QuerySet.bulk_create()`](../ref/models/querysets.md#django.db.models.query.QuerySet.bulk_create)
  * [`QuerySet.abulk_create()`](../ref/models/querysets.md#django.db.models.query.QuerySet.abulk_create)
  * [`QuerySet.get_or_create()`](../ref/models/querysets.md#django.db.models.query.QuerySet.get_or_create)
  * [`QuerySet.aget_or_create()`](../ref/models/querysets.md#django.db.models.query.QuerySet.aget_or_create)
  * [`QuerySet.update_or_create()`](../ref/models/querysets.md#django.db.models.query.QuerySet.update_or_create)
  * [`QuerySet.aupdate_or_create()`](../ref/models/querysets.md#django.db.models.query.QuerySet.aupdate_or_create)
* The minimum supported version of `oracledb` is increased from 1.3.2 to
  2.3.0.
* Built-in aggregate functions accepting only one argument (`Avg`, `Count`,
  `Max`, `Min`, `StdDev`, `Sum`, and `Variance`) now raise
  [`TypeError`](https://docs.python.org/3/library/exceptions.html#TypeError) when called with an incorrect number of arguments.

<a id="deprecated-features-5-2"></a>

## Features deprecated in 5.2

### Miscellaneous

* The `all` argument for the `django.contrib.staticfiles.finders.find()`
  function is deprecated in favor of the `find_all` argument.
* Fallbacks to `request.user` and `request.auser()` when `user` is
  `None` in `django.contrib.auth.login()` and
  `django.contrib.auth.alogin()`, respectively, are deprecated.
* The `ordering` keyword argument of the PostgreSQL specific aggregation
  functions `django.contrib.postgres.aggregates.ArrayAgg`,
  `django.contrib.postgres.aggregates.JSONBAgg`, and
  `django.contrib.postgres.aggregates.StringAgg` is deprecated in favor
  of the `order_by` argument.
* Support for subclasses of `RemoteUserMiddleware` that override
  `process_request()` without overriding `aprocess_request()` is
  deprecated.
